<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Campus Lost & Found</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        body {
            background: #f0f2f5;
            font-family: 'Segoe UI', sans-serif;
        }
        .nav-bar {
            background: #0d6efd;
            padding: 15px 30px;
            color: #fff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .nav-bar h4 {
            margin: 0;
            font-weight: 600;
        }
        .btn-logout {
            background: #fff;
            color: #0d6efd;
            font-weight: 500;
        }
        .dashboard-container {
            max-width: 1000px;
            margin: 50px auto;
        }
        .card {
            border-radius: 15px;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        .card-body i {
            font-size: 50px;
            margin-bottom: 15px;
            color: #0d6efd;
        }
        .welcome-text {
            font-weight: 600;
            margin-bottom: 30px;
        }
    </style>
</head>
<body>

    <!-- NAVBAR -->
    <div class="nav-bar">
        <h4>Campus Lost & Found</h4>
        <!-- Logout Button -->
<button class="btn btn-logout btn-sm" onclick="window.location.href='login.html'">
    <i class="bi bi-box-arrow-right"></i> Logout
</button>

    </div>

    <!-- DASHBOARD -->
    <div class="dashboard-container text-center">
        <h3 class="welcome-text">Welcome <span id="username"></span> ðŸ‘‹</h3>

        <div class="row g-4">
            <!-- Report Lost Item -->
           <div class="card p-4 text-center">
    <i class="bi bi-x-circle-fill"></i>
    <h5 class="mt-3">Report Lost Item</h5>
    <p class="text-muted small">Quickly report a lost item</p>
    <button class="btn btn-primary btn-sm mt-2" onclick="window.location.href='report_loss.html'">Open</button>
</div>





            <!-- Report Found Item -->
            <div class="col-md-4">
                <div class="card p-4 text-center" onclick="goFoundPage()">
                    <i class="bi bi-check-circle-fill"></i>
                    <h5 class="mt-3">Report Found Item</h5>
                    <p class="text-muted small">Add an item you found</p>
                    <button class="btn btn-success btn-sm mt-2">Open</button>
                </div>
            </div>

            <!-- View All Items -->
            <div class="col-md-4">
                <div class="card p-4 text-center" onclick="goViewItemsPage()">
                    <i class="bi bi-card-list"></i>
                    <h5 class="mt-3">View All Items</h5>
                    <p class="text-muted small">Check lost & found items</p>
                    <button class="btn btn-warning btn-sm mt-2">Open</button>
                </div>
            </div>

            <!-- My Profile -->
            <div class="col-md-4">
                <div class="card p-4 text-center" onclick="goProfilePage()">
                    <i class="bi bi-person-circle"></i>
                    <h5 class="mt-3">My Profile</h5>
                    <p class="text-muted small">View & edit your profile</p>
                    <button class="btn btn-dark btn-sm mt-2">Open</button>
                </div>
            </div>
        </div>
    </div>

<script type="module" src="js/firebase.js"></script>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>

    <script>
        // Firebase Config (same as login/signup)
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT.firebaseapp.com",
            projectId: "YOUR_PROJECT",
            storageBucket: "YOUR_PROJECT.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID",
            databaseURL: "https://YOUR_PROJECT.firebaseio.com"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const rtdb = firebase.database();

        // CHECK LOGIN
        auth.onAuthStateChanged(user => {
            if (!user) {
                window.location.href = "login.html";
            } else {
                loadUserName(user.uid);
            }
        });

        function loadUserName(uid) {
            // Firestore
            db.collection("users").doc(uid).get().then(doc => {
                if (doc.exists) document.getElementById("username").textContent = doc.data().fullname;
            });
            // Realtime DB fallback
            rtdb.ref("users/" + uid).once("value", snapshot => {
                if (snapshot.exists()) document.getElementById("username").textContent = snapshot.val().fullname;
            });
        }

        // Logout
        function logout() {
            auth.signOut().then(() => window.location.href="login.html");
        }

        // Navigation
        function goLostPage() { window.location.href="report_lost.html"; }
        function goFoundPage() { window.location.href="report_found.html"; }
        function goViewItemsPage() { window.location.href="view_items.html"; }
        function goProfilePage() { window.location.href="profile.html"; }


        function goLostPage() {
    window.location.href = "report_lost.html";
}

    </script>
</body>
</html>